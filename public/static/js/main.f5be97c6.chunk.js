(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{195:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),i=n(22),s=n.n(i),o=n(7),l=(0,n(1).createContext)(),u=n(2),d={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",maquinasCategoriesUpdate:"[company] maquinasCategoriesUpdate",deleteProperty:"[company] deleteProperty",addSection:"[sections] addSection",getMaquinas:"[Maquina] getMaquina",getThisMaquinas:"[Maquina] getThisMaquina",updateThisMaquinas:"[Maquina] updateThisMaquinas",addMaquina:"[Maquina] addMaquina",maquinaUpdate:"[Maquina] MaquinaUpdate",maquinaDelete:"[Maquina] MaquinaDelete",featuresUpdate:"[Maquina] featuresUpdate",galleryUpdate:"[Maquina] galleryUpdate",getSections:"[Section] getSections",sectionUpdate:"[Section] sectionUpdate",deleteSection:"[Section] deleteSection",updateThis:"[Section] updateThis"},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.login:case d.signup:case d.hasToken:return Object(u.a)({},t.payload);case d.logout:return{logged:!1};default:return e}},b=(n(82),n(83),n(30)),m=n(76),p=n(31),h=n(16),O=n(13),x=function(){return Object(a.jsx)("nav",{className:"login-nav",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/",children:"Entrar"})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/registro",children:"Registro"})})]})]})})},f=n(3),v=n.n(f),g=n(5),y=n(9),N=(0,n(1).createContext)(),C=function(e){var t=e.handleShow,n=Object(c.useContext)(N).sections,r=Object(c.useContext)(l),i=r.dispatch,s=r.user,o=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:d.logout});case 2:return e.next=4,localStorage.removeItem("mbr-token");case 4:return e.next=6,localStorage.removeItem("mbr-user");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"dash-nav",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr",children:Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})})})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/empresa",children:"Datos de empresa"})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/maquinaria",children:"Maquinaria"})}),Object(a.jsxs)("li",{className:"dropdown",children:[Object(a.jsxs)("p",{"data-toggle":"dropdown",children:["Secciones de la web ",Object(a.jsx)(y.a,{icon:"chevron-down"})]}),n.length>0&&Object(a.jsx)("ul",{className:"dropdown-menu",children:n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/seccion/".concat(e._id),children:e.sectionName})},e._id)}))})]})]}),Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."}),"admin@yai.com"===s.email&&Object(a.jsx)("button",{className:"my-btn third mini",onClick:t,children:"A\xf1adir Secci\xf3n"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:o,children:"Cerrar Sesi\xf3n"})]})]})})},k=function(){var e=Object(c.useContext)(l).user;return Object(a.jsx)("div",{children:Object(a.jsxs)("h1",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},w=n(19),S=n(8),q=n(12),T=n.n(q),F=n(10),E=function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,s=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(o.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(F.a,{className:"edit-modal my-modals",show:p,onHide:O,children:[Object(a.jsx)(F.a.Header,{children:Object(a.jsx)(F.a.Title,{children:l})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:s,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})},I=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/mbr-app/upload",(n=new FormData).append("upload_preset","mbr-app"),n.append("file",t),e.next=6,fetch("https://api.cloudinary.com/v1_1/mbr-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return a=e.secure_url})).catch((function(e){return console.log(e)}));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1],i=function(){r(e)},s=function(e){var t=e.target;r(Object(u.a)(Object(u.a)({},a),{},Object(w.a)({},t.name,t.value)))},l=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,c=n.files[0],e.next=4,I(c);case 4:return i=e.sent,e.next=7,r(Object(u.a)(Object(u.a)({},a),{},Object(w.a)({},n.name,i)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:r,handleInputChange:s,handleFileChange:l,resetForm:i}},L="https://mbr-cms.herokuapp.com/api",M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(L,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(L,"/").concat(e),c=localStorage.getItem("mbr-token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},U=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("company/new",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return c=a.company,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("company/update/".concat(t),n,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=11;break}return r=c.company,e.abrupt("return",r);case 11:i=c.error,T.a.fire("Error",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("company/delete/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=(0,n(1).createContext)(),R=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useContext)(B),s=i.company,l=i.dispatchCompany,j=s.name,b=s.phone,m=s.address,p=s._id,h=s.mainEmail,O=s.mainLogo,x=s.secondaryLogo,f=s.linkedin,N=s.facebook,C=s.twitter,k=s.instagram,q=s.maquinasCategories,F=A(s),I=F.values,L=F.setValues,M=F.handleInputChange,V=F.handleFileChange,U=function(){document.getElementById("to-reset-maq-feat").value=""},R=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(p);case 2:l({type:d.companyDelete});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(Object(u.a)({},I),{},Object(w.a)({},t,"")),L(Object(u.a)(Object(u.a)({},I),{},Object(w.a)({},t,""))),l({type:d.updateCompany,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){e.preventDefault(),l({type:d.updateCompany,payload:I})},H=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(p,s);case 2:T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Datos de empresa"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:H,children:"Guardar Cambios"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:R,children:"Borrar esta empresa"}),Object(a.jsxs)("div",{className:"editing",children:[Object(a.jsx)(E,{deleteField:_,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:M,editValue:j,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:M,editValue:m,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:M,editValue:b,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:M,editValue:h,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:V,editValue:O,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:V,editValue:x,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:M,editValue:C,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:M,editValue:N,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:M,editValue:k,submitEdit:G}),Object(a.jsx)(E,{deleteField:_,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:M,editValue:f,submitEdit:G}),Object(a.jsx)("div",{className:"edit-group categories",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q.includes(n)||(L(Object(u.a)(Object(u.a)({},I),{},{maquinasCategories:[].concat(Object(S.a)(q),[n])})),l({type:d.maquinasCategoriesUpdate,payload:[].concat(Object(S.a)(q),[n])}),U()),U()},children:[Object(a.jsx)("p",{className:"maq-cat-title",children:"Categor\xedas de m\xe1quinas:"}),Object(a.jsx)("div",{className:"features",children:null===q||void 0===q?void 0:q.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(q);t.splice(e,1),L(Object(u.a)(Object(u.a)({},I),{},{maquinasCategories:t})),l({type:d.maquinasCategoriesUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-maq-feat",onChange:function(e){r(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]})]})},_=function(e){e.company;var t=e.setFetchingCompany,n=A({}),c=n.values,r=n.handleInputChange,i=n.handleFileChange,s=function(){var e=Object(g.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,U(c);case 3:a=e.sent,t(!0),a;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"add-form",onSubmit:s,children:[Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:r}),Object(a.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:r}),Object(a.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:r}),Object(a.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:r}),Object(a.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:r}),Object(a.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:r}),Object(a.jsxs)("div",{className:"input-images",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:i})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:i})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},G=function(){var e=Object(c.useRef)(!0),t=Object(c.useContext)(B).company;return Object(c.useEffect)((function(){return function(){e.current=!1}}),[]),Object(a.jsx)(a.Fragment,{children:t._id?Object(a.jsx)(R,{}):Object(a.jsx)(_,{})})},H=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/login",{email:t,password:n},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return r={id:c.id,name:c.name,email:c.email,logged:!0,token:c.token},localStorage.setItem("mbr-user",JSON.stringify(r)),localStorage.setItem("mbr-token",c.token),e.abrupt("return",r);case 13:i=c.msg,T.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(v.a.mark((function e(t,n,a){var c,r,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("auth/signup",{name:t,email:n,password:a},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:if(!(r=e.sent).ok){e.next=13;break}return i={id:r.id,name:r.name,email:r.email,token:r.token,logged:!0},localStorage.setItem("mbr-user",JSON.stringify(i)),localStorage.setItem("mbr-token",r.token),e.abrupt("return",i);case 13:s=r.msg,T.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(){var e=A({}),t=e.values,n=e.handleInputChange,r=t.email,i=t.password,s=Object(c.useContext)(l).dispatch,o=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,H(r,i);case 3:n=e.sent,s({type:d.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:o,children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(a.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(a.jsx)(h.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},z=function(){var e=A({}),t=e.values,n=e.handleInputChange,r=t.name,i=t.email,s=t.password,o=t.password2,u=Object(c.useContext)(l).dispatch,j=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==o){e.next=8;break}return e.next=4,J(r,i,s);case 4:n=e.sent,u({type:d.signup,payload:n}),e.next=9;break;case 8:T.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:j,children:[Object(a.jsx)("label",{children:"Nombre"}),Object(a.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(a.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(a.jsx)(h.b,{to:"/",children:"aqu\xed"})," "]})]})})},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getMaquinas:case d.getThisMaquinas:return t.payload;case d.maquinaUpdate:case d.addMaquina:return Object(u.a)({},t.payload);case d.featuresUpdate:return Object(u.a)(Object(u.a)({},e),{},{features:t.payload});case d.galleryUpdate:return Object(u.a)(Object(u.a)({},e),{},{gallery:t.payload});default:return e}},K=function(e){var t=e.maquina,n=e.idx,c=e.getID,r=e.handleDeleteMaquina;return Object(a.jsxs)("article",{className:"maquina-card",children:[Object(a.jsx)("h6",{children:t.name}),Object(a.jsxs)("div",{className:"maquina-card-body",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:t.image,alt:t.name})}),Object(a.jsxs)("div",{className:"button-group",children:[Object(a.jsx)("button",{onClick:function(){return c(t._id)},className:"my-btn mini",children:"Editar"}),Object(a.jsx)("button",{onClick:function(){return r(t._id,n)},className:"my-btn mini secondary",children:"Borrar"})]})]})]})},W=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("maquinaria/nueva",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("maquinaria/actualizarMaquina/".concat(t),n,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("maquinaria/borrarMaquina/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.maquina,n=e.setShow,r=e.setFetchingMaquinaria,i=e.setmaquinaSelected,s=Object(c.useState)(),l=Object(o.a)(s,2),j=l[0],b=l[1],m=Object(c.useContext)(B).company.maquinasCategories,p=Object(c.useReducer)(Y,t),h=Object(o.a)(p,2),O=h[0],x=h[1],f=A(O),N=f.values,C=f.setValues,k=f.handleInputChange,w=f.handleFileChange,q=N.features,F=N.name,E=N._id,L=N.gallery,M=N.image,V=function(){document.getElementById("to-reset").value=""},U=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,I(a);case 4:c=e.sent,b(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){e.preventDefault(),x({type:d.maquinaUpdate,payload:N})},P=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(E,O);case 2:if(e.sent){e.next=7;break}T.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error"),e.next=14;break;case 7:return T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.next=10,r(!0);case 10:return e.next=12,i(O);case 12:return e.next=14,n(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:D,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===O||void 0===O?void 0:O.name)&&Object(a.jsx)("p",{className:"preview",children:null===O||void 0===O?void 0:O.name})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:k,placeholder:F,name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:D,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===O||void 0===O?void 0:O.category)&&Object(a.jsx)("p",{className:"preview",children:null===O||void 0===O?void 0:O.category})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:k,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),m&&m.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:D,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===O||void 0===O?void 0:O.image)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:M,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:w,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q.includes(j)||(C(Object(u.a)(Object(u.a)({},N),{},{features:[].concat(Object(S.a)(q),[j])})),x({type:d.featuresUpdate,payload:[].concat(Object(S.a)(q),[j])}),V()),V()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===O||void 0===O?void 0:O.features)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===q||void 0===q?void 0:q.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(q);t.splice(e,1),C(Object(u.a)(Object(u.a)({},N),{},{features:t})),x({type:d.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset",onChange:function(e){b(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L.includes(j)||(C(Object(u.a)(Object(u.a)({},N),{},{gallery:[].concat(Object(S.a)(L),[j])})),x({type:d.galleryUpdate,payload:[].concat(Object(S.a)(L),[j])}),V()),V()},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===O||void 0===O?void 0:O.gallery)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"gallery",children:null===L||void 0===L?void 0:L.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:e}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(S.a)(L);t.splice(e,1),C(Object(u.a)(Object(u.a)({},N),{},{gallery:t})),x({type:d.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:U,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:P,children:"Guardar Cambios"})]})},ee=function(e){var t=e.setShow,n=e.setmaquinaSelected,r=e.setFetchingMaquinaria,i=Object(c.useState)(),s=Object(o.a)(i,2),l=s[0],j=s[1],b=Object(c.useContext)(B).company.maquinasCategories,m=Object(c.useReducer)(Y),p=Object(o.a)(m,2),h=p[0],O=p[1],x=A(),f=x.values,N=x.setValues,C=x.handleInputChange,k=x.handleFileChange,w=f.features,q=f.gallery,F=f.image,E=function(){document.getElementById("to-reset-add").value=""},L=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,I(a);case 4:c=e.sent,j(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){e.preventDefault(),O({type:d.addMaquina,payload:f})},V=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(h);case 2:if(e.sent){e.next=9;break}return T.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error"),e.next=7,t(!1);case 7:e.next=16;break;case 9:return T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.next=12,r(!0);case 12:return e.next=14,n(h);case 14:return e.next=16,t(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("p",{children:['Para que lo que se introduzca funcione, tienes que escribir lo que sea, darle al bot\xf3n "A\xf1adir" y esperar a que salga este icono. ',Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===h||void 0===h?void 0:h.name)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),(null===h||void 0===h?void 0:h.name)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.name}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:C,placeholder:"Nombre de la m\xe1quina",name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===h||void 0===h?void 0:h.category)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),(null===h||void 0===h?void 0:h.category)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.category}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:C,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),b&&b.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===h||void 0===h?void 0:h.image)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),F&&Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:F,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:k,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w?(null===w||void 0===w?void 0:w.includes(l))||(N(Object(u.a)(Object(u.a)({},f),{},{features:[].concat(Object(S.a)(w),[l])})),O({type:d.featuresUpdate,payload:[].concat(Object(S.a)(w),[l])}),E()):(N(Object(u.a)(Object(u.a)({},f),{},{features:[l]})),O({type:d.featuresUpdate,payload:[l]}),E()),E()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===h||void 0===h?void 0:h.features)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(w);t.splice(e,1),N(Object(u.a)(Object(u.a)({},f),{},{features:t})),O({type:d.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-add",onChange:function(e){j(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q?(null===q||void 0===q?void 0:q.includes(l))||(N(Object(u.a)(Object(u.a)({},f),{},{gallery:[].concat(Object(S.a)(q),[l])})),O({type:d.galleryUpdate,payload:[].concat(Object(S.a)(q),[l])})):(N(Object(u.a)(Object(u.a)({},f),{},{gallery:[l]})),O({type:d.galleryUpdate,payload:[l]}))},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===h||void 0===h?void 0:h.gallery)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),q&&Object(a.jsx)("div",{className:"gallery",children:null===q||void 0===q?void 0:q.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(S.a)(q);t.splice(e,1),N(Object(u.a)(Object(u.a)({},f),{},{gallery:t})),O({type:d.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:L,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:V,children:"Guardar Cambios"})]})},te=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(o.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(),b=Object(o.a)(j,2),m=b[0],p=b[1],h=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("maquinaria/".concat(t)).then((function(e){return e.json()})).then((function(e){return p(e.data)})).then((function(){return q(!0,"edit")})).catch((function(e){return new Error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(c.useState)(!0),x=Object(o.a)(O,2),f=x[0],y=x[1],N=Object(c.useReducer)(Y),C=Object(o.a)(N,2),k=C[0],w=C[1];Object(c.useEffect)((function(){f&&M("maquinaria").then((function(e){return e.json()})).then((function(e){return w({type:d.getMaquinas,payload:e.data})})).then((function(){return y(!1)})).catch((function(e){return new Error(e)}))}),[f,m]);var S=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:y(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),u(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("section",{className:"maquinas-head",children:[Object(a.jsx)("h1",{children:"Maquinaria"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return q(!0,"add")},children:"A\xf1adir Maquina"})]}),Object(a.jsx)("section",{className:"all-maquinas",children:null===k||void 0===k?void 0:k.map((function(e){return Object(a.jsx)(K,{maquina:e,getID:h,handleDeleteMaquina:S},e._id)}))}),Object(a.jsxs)(F.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:n,onHide:function(){return q(!1,"")},children:[function(e){if(n)switch(e){case"add":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F.a.Header,{children:Object(a.jsx)(F.a.Title,{children:"A\xf1adir M\xe1quina"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsx)(ee,{setShow:r,setFetchingMaquinaria:y,setmaquinaSelected:p})})]});case"edit":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F.a.Header,{children:Object(a.jsx)(F.a.Title,{children:"Editando M\xe1quina"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsx)($,{setShow:r,maquina:m,setFetchingMaquinaria:y,setmaquinaSelected:p})})]})}}(l),Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return q(!1,"")},children:"cerrar"})})]})]})},ne=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,V("section/new",t,"POST");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a.section);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("section/update/".concat(n),t,"POST");case 2:return e.next=4,M("section");case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c.sections);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("section/delete/".concat(t),{},"POST");case 2:return e.next=4,M("section");case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a.sections);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=r.a.memo((function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,s=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(o.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(F.a,{className:"my-modals",show:p,onHide:O,children:[Object(a.jsx)(F.a.Header,{children:Object(a.jsx)(F.a.Title,{children:l})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:s,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})})),ie=n(75),se=n.n(ie),oe=(n(194),function e(t){var n=t.setQuill,r=t.handleQuill,i=t.setParsed,s=Object(c.useState)(""),l=Object(o.a)(s,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){n(u),i({__html:u})}),[u,n,i]),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"text-editor",children:Object(a.jsx)(se.a,{modules:e.modules,formats:e.formats,theme:"snow",value:u,onChange:d})}),Object(a.jsx)("form",{onSubmit:r,children:Object(a.jsx)("button",{type:"submit",className:"my-btn mini secondary",children:"Guardar texto"})})]})});oe.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link"],["clean"]],clipboard:{matchVisual:!1}},oe.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link"];var le=oe,ue=function(){var e=Object(c.useContext)(l).user,t=Object(c.useContext)(N),n=t.dispatchSections,r=t.sections,i=Object(O.h)().id,s=A(),j=s.values,b=s.setValues,m=s.handleInputChange,p=s.handleFileChange,h=j.title,x=j.text,f=j.parsedText,C=j.subtitle,k=j._id,q=j.uniqueImage,F=j.gallery,E=j.features,L=j.formInputs,M=Object(O.g)(),V=Object(c.useRef)(),U=Object(c.useState)(),D=Object(o.a)(U,2),P=D[0],B=D[1],R=Object(c.useState)(),_=Object(o.a)(R,2),G=_[0],H=_[1],J=Object(c.useState)(),Q=Object(o.a)(J,2),z=Q[0],Y=Q[1];Object(c.useEffect)((function(){r.length>0&&(V.current=r.find((function(e){return e._id===i})),b(V.current))}),[i,r,b]);var K=function(e){document.getElementById(e).value=""},W=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,I(a);case 4:c=e.sent,B(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.push("/mbr"),e.next=3,ce(i);case 3:t=e.sent,n({type:d.deleteSection,payload:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(Object(u.a)(Object(u.a)({},j),{},Object(w.a)({},t,"")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){e.preventDefault()},ee=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(j,k);case 2:(t=e.sent)?(T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),n({type:d.sectionUpdate,payload:t})):T.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"section-screen",children:[Object(a.jsxs)("h1",{children:["Secci\xf3n ",Object(a.jsx)("span",{children:null===j||void 0===j?void 0:j.sectionName})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:ee,children:"Guardar Cambios"}),"admin@yai.com"===e.email&&Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:X,children:"Borrar esta secci\xf3n"}),(h||""===h)&&Object(a.jsx)(re,{nameValue:"title",deleteField:Z,inputType:"text",editLabel:"T\xedtulo",editAction:m,editValue:null===j||void 0===j?void 0:j.title,submitEdit:$}),C&&Object(a.jsx)(re,{nameValue:"subtitle",deleteField:Z,inputType:"text",editLabel:"Subt\xedtulo",editAction:m,editValue:null===j||void 0===j?void 0:j.subtitle,submitEdit:$}),q&&Object(a.jsx)(re,{imageEdit:!0,nameValue:"uniqueImage",deleteField:Z,inputType:"file",editLabel:"Imagen principal",editAction:p,editValue:null===j||void 0===j?void 0:j.uniqueImage,submitEdit:$}),(null===F||void 0===F?void 0:F.length)>0&&Object(a.jsxs)("div",{className:"edit-gallery",children:[Object(a.jsx)("div",{className:"gallery",children:null===F||void 0===F?void 0:F.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(S.a)(F);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{gallery:t}))}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:W,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),F?(null===F||void 0===F?void 0:F.includes(P))||b(Object(u.a)(Object(u.a)({},j),{},{gallery:[].concat(Object(S.a)(F),[P])})):b(Object(u.a)(Object(u.a)({},j),{},{gallery:[P]}))},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===E||void 0===E?void 0:E.length)>0&&Object(a.jsxs)("div",{className:"edit-features",children:[Object(a.jsx)("div",{className:"features",children:null===E||void 0===E?void 0:E.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(E);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{features:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-features",onChange:function(e){B(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),E?(null===E||void 0===E?void 0:E.includes(P))||(b(Object(u.a)(Object(u.a)({},j),{},{features:[].concat(Object(S.a)(E),[P])})),K("to-reset-features")):(b(Object(u.a)(Object(u.a)({},j),{},{features:[P]})),K("to-reset-features")),K("to-reset-features")},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===L||void 0===L?void 0:L.length)>0&&Object(a.jsxs)("div",{className:"edit-features",children:[Object(a.jsx)("div",{className:"features",children:null===L||void 0===L?void 0:L.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(L);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{formInputs:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-inputs",onChange:function(e){B(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),L?(null===L||void 0===L?void 0:L.includes(P))||(b(Object(u.a)(Object(u.a)({},j),{},{formInputs:[].concat(Object(S.a)(L),[P])})),K("to-reset-inputs")):(b(Object(u.a)(Object(u.a)({},j),{},{formInputs:[P]})),K("to-reset-inputs")),K("to-reset-inputs")},className:"my-btn mini",children:"A\xf1adir"})]})]}),x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:"edit-group text-editor-group",children:[Object(a.jsx)("p",{children:"Texto:"}),Object(a.jsx)("div",{dangerouslySetInnerHTML:f})]}),Object(a.jsx)(le,{setQuill:H,handleQuill:function(e){e.preventDefault(),b(Object(u.a)(Object(u.a)({},j),{},{text:G,parsedText:z}))},setParsed:Y})]})]})})},de=function(e){var t=e.handleClose,n=Object(c.useContext)(N).dispatchSections,r=Object(c.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1],j=Object(c.useState)(),b=Object(o.a)(j,2),m=b[0],p=b[1],h=Object(c.useState)(),O=Object(o.a)(h,2),x=O[0],f=O[1],C=A(),k=C.values,w=C.setValues,q=C.handleInputChange,F=C.handleFileChange,E=k.uniqueImage,L=k.gallery,M=k.features,V=k.formInputs,U=function(e){document.getElementById(e).value=""},D=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,I(a);case 4:c=e.sent,l(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(g.a)(v.a.mark((function e(a){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,ne(k);case 3:(c=e.sent)?(T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),n({type:d.addSection,payload:c})):T.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error"),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:"section-form",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("label",{children:["Tipo de secci\xf3n* ",(null===k||void 0===k?void 0:k.sectionType)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsxs)("select",{onChange:q,name:"sectionType",required:!0,children:[Object(a.jsx)("option",{value:"section",defaultValue:!0,children:"Secci\xf3n"}),Object(a.jsx)("option",{value:"nav",children:"Navegador"}),Object(a.jsx)("option",{value:"header",children:"Cabecera"}),Object(a.jsx)("option",{value:"footer",children:"Footer"})]}),Object(a.jsxs)("label",{children:["Nombre de la secci\xf3n* ",(null===k||void 0===k?void 0:k.sectionName)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:q,name:"sectionName",autoComplete:"off",placeholder:"Nombre de la secci\xf3n",required:!0}),Object(a.jsxs)("label",{children:["T\xedtulo ",(null===k||void 0===k?void 0:k.title)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:q,autoComplete:"off",name:"title",placeholder:"T\xedtulo",required:!0}),Object(a.jsx)("label",{children:"Subt\xedtulo "}),Object(a.jsx)("input",{type:"text",onChange:q,autoComplete:"off",name:"subtitle",placeholder:"Subt\xedtulo"}),Object(a.jsx)("label",{children:"Imagen principal"}),E&&Object(a.jsx)("figure",{className:"unique-image",children:Object(a.jsx)("img",{src:E,alt:""})}),Object(a.jsx)("input",{className:"file-input",type:"file",onChange:F,name:"uniqueImage"}),Object(a.jsx)("label",{htmlFor:"",children:"Galer\xeda de im\xe1genes"}),Object(a.jsx)("div",{className:"gallery",children:null===L||void 0===L?void 0:L.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(S.a)(L);t.splice(e,1),w(Object(u.a)(Object(u.a)({},k),{},{gallery:t}))}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:D,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),L?(null===L||void 0===L?void 0:L.includes(s))||w(Object(u.a)(Object(u.a)({},k),{},{gallery:[].concat(Object(S.a)(L),[s])})):w(Object(u.a)(Object(u.a)({},k),{},{gallery:[s]}))},className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("div",{className:"right-side",children:[Object(a.jsx)("label",{children:"Texto "}),Object(a.jsx)(le,{setQuill:p,handleQuill:function(e){e.preventDefault(),w(Object(u.a)(Object(u.a)({},k),{},{text:m,parsedText:x}))},setParsed:f}),Object(a.jsx)("label",{htmlFor:"",children:"Caracter\xedsticas"}),Object(a.jsx)("div",{className:"features",children:null===M||void 0===M?void 0:M.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(M);t.splice(e,1),w(Object(u.a)(Object(u.a)({},k),{},{features:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-section-features",onChange:function(e){l(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),M?(null===M||void 0===M?void 0:M.includes(s))||(w(Object(u.a)(Object(u.a)({},k),{},{features:[].concat(Object(S.a)(M),[s])})),U("to-reset-section-features")):(w(Object(u.a)(Object(u.a)({},k),{},{features:[s]})),U("to-reset-section-features")),U("to-reset-section-features")},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(a.jsx)("label",{children:"Inputs del formulario"}),Object(a.jsx)("div",{className:"features",children:null===V||void 0===V?void 0:V.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(S.a)(V);t.splice(e,1),w(Object(u.a)(Object(u.a)({},k),{},{formInputs:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-section-inputs",onChange:function(e){l(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),V?(null===V||void 0===V?void 0:V.includes(s))||(w(Object(u.a)(Object(u.a)({},k),{},{formInputs:[].concat(Object(S.a)(V),[s])})),U("to-reset-section-inputs")):(w(Object(u.a)(Object(u.a)({},k),{},{formInputs:[s]})),U("to-reset-section-inputs")),U("to-reset-section-inputs")},className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("form",{className:"section-form",onSubmit:P,children:Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Guardar Datos"})})]})},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getSections:return t.payload;case d.addSection:return[].concat(Object(S.a)(e),[t.payload]);case d.deleteSection:return t.payload;case d.updateThis:return Object(u.a)({},t.payload);case d.sectionUpdate:return t.payload;default:return e}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getCompany:case d.addCompnany:case d.companyUpdate:case d.deleteProperty:return Object(u.a)({},t.payload);case d.maquinasCategoriesUpdate:return Object(u.a)(Object(u.a)({},e),{},{maquinasCategories:t.payload});case d.companyDelete:return{};default:return e}},me=function(){var e=Object(c.useRef)(!0),t=Object(c.useContext)(l).user,n=Object(c.useReducer)(je,{}),r=Object(o.a)(n,2),i=r[0],s=r[1],j=Object(c.useReducer)(be,{}),b=Object(o.a)(j,2),m=b[0],p=b[1];Object(c.useEffect)((function(){return function(){e.current=!1}})),Object(c.useEffect)((function(){e.current&&(M("section").then((function(e){return e.json()})).then((function(e){return s({type:d.getSections,payload:e.sections})})).catch((function(e){return new Error(e)})),M("company").then((function(e){return e.json()})).then((function(e){return p({type:d.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)})))}),[]);var f=Object(c.useState)(!1),v=Object(o.a)(f,2),g=v[0],y=v[1],w=function(){return y(!1)};return Object(a.jsx)(h.a,{children:Object(a.jsx)("div",{children:t.token?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(B.Provider,{value:{company:m,dispatchCompany:p},children:Object(a.jsx)(N.Provider,{value:{sections:i,dispatchSections:s},children:Object(a.jsxs)("div",{className:"dashboard-container",children:[Object(a.jsx)(C,{handleShow:function(){return y(!0)}}),Object(a.jsxs)("main",{children:[Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/mbr",component:k}),Object(a.jsx)(O.b,{path:"/mbr/empresa",component:G}),Object(a.jsx)(O.b,{path:"/mbr/maquinaria",component:te}),Object(a.jsx)(O.b,{path:"/mbr/seccion/:id",component:function(e){return Object(a.jsx)(ue,Object(u.a)({},e))}}),Object(a.jsx)(O.a,{to:"/mbr"})]}),Object(a.jsxs)(F.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:g,onHide:w,children:[Object(a.jsx)(F.a.Header,{children:Object(a.jsx)("h1",{children:"A\xf1adir Secci\xf3n a la web"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsx)(de,{handleClose:w})}),Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:w,children:"cerrar"})})]})]})]})})})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{}),Object(a.jsxs)("main",{className:"container",children:[Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/",component:Q}),Object(a.jsx)(O.b,{path:"/registro",component:z}),Object(a.jsx)(O.a,{to:"/"})]}),Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."})]})]})})})};b.b.add(m.a,p.d,p.b,p.c,p.a);var pe=function(){return JSON.parse(localStorage.getItem("mbr-user"))||{logged:!1}},he=function(){var e=Object(c.useRef)(!0),t=Object(c.useReducer)(j,{},pe),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){return function(){e.current=!1}}),[]),Object(c.useEffect)((function(){e.current&&localStorage.setItem("mbr-user",JSON.stringify(r))}),[r]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(l.Provider,{value:{user:r,dispatch:i},children:Object(a.jsx)(me,{})})})};s.a.render(Object(a.jsx)(he,{}),document.getElementById("root"))},83:function(e,t,n){}},[[195,1,2]]]);
//# sourceMappingURL=main.f5be97c6.chunk.js.map