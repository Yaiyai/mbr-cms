(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n(20),i=n.n(r),s=n(7),o=(0,n(1).createContext)(),l=n(3),u={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",deleteProperty:"[company] deleteProperty",addSection:"[sections] addSection",getMaquinas:"[Maquina] getMaquina",getThisMaquinas:"[Maquina] getThisMaquina",updateThisMaquinas:"[Maquina] updateThisMaquinas",addMaquina:"[Maquina] addMaquina",maquinaUpdate:"[Maquina] MaquinaUpdate",maquinaDelete:"[Maquina] MaquinaDelete",featuresUpdate:"[Maquina] featuresUpdate",galleryUpdate:"[Maquina] galleryUpdate",sectionUpdate:"[Section] sectionUpdate"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.login:case u.signup:case u.hasToken:return Object(l.a)({},t.payload);case u.logout:return{logged:!1};default:return e}},j=(n(38),n(39),n(22)),b=n(32),m=n(23),p=n(15),h=n(11),O=function(){return Object(a.jsx)("nav",{className:"login-nav",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/",children:"Entrar"})}),Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/registro",children:"Registro"})})]})]})})},x=n(2),f=n.n(x),v=n(5),y=n(10),g=function(e){var t=e.handleShow,n=e.sections,r=Object(c.useContext)(o),i=r.dispatch,s=r.user,l=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:u.logout});case 2:return e.next=4,localStorage.removeItem("mbr-token");case 4:return e.next=6,localStorage.removeItem("mbr-user");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"dash-nav",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/mbr",children:Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})})})}),Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/mbr/empresa",children:"Datos de empresa"})}),Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/mbr/maquinaria",children:"Maquinaria"})}),Object(a.jsxs)("li",{className:"dropdown",children:[Object(a.jsxs)("p",{"data-toggle":"dropdown",children:["Secciones de la web ",Object(a.jsx)(y.a,{icon:"chevron-down"})]}),n&&Object(a.jsx)("ul",{className:"dropdown-menu",children:n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{to:"/mbr/seccion/".concat(e._id),children:e.sectionName})},e._id)}))})]})]}),Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."}),"admin@yai.com"===s.email&&Object(a.jsx)("button",{className:"my-btn third mini",onClick:t,children:"A\xf1adir Secci\xf3n"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:l,children:"Cerrar Sesi\xf3n"})]})]})})},N=function(){var e=Object(c.useContext)(o).user;return Object(a.jsx)("div",{children:Object(a.jsxs)("h1",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},C="https://mbr-cms.herokuapp.com/api",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(C,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(C,"/").concat(e),c=localStorage.getItem("mbr-token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.getCompany:case u.addCompnany:case u.companyUpdate:case u.deleteProperty:return Object(l.a)({},t.payload);case u.companyDelete:return{};default:return e}},q=n(18),F=n(19),T=n.n(F),E=n(8),M=function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,o=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(s.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(E.a,{className:"edit-modal my-modals",show:p,onHide:O,children:[Object(a.jsx)(E.a.Header,{children:Object(a.jsx)(E.a.Title,{children:l})}),Object(a.jsx)(E.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:o,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(E.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})},L=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/mbr-app/upload",(n=new FormData).append("upload_preset","mbr-app"),n.append("file",t),e.next=6,fetch("https://api.cloudinary.com/v1_1/mbr-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return a=e.secure_url})).catch((function(e){return console.log(e)}));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(s.a)(t,2),a=n[0],r=n[1],i=function(){r(e)},o=function(e){var t=e.target;r(Object(l.a)(Object(l.a)({},a),{},Object(q.a)({},t.name,t.value)))},u=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,c=n.files[0],e.next=4,L(c);case 4:return i=e.sent,e.next=7,r(Object(l.a)(Object(l.a)({},a),{},Object(q.a)({},n.name,i)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:r,handleInputChange:o,handleFileChange:u,resetForm:i}},V=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("company/new",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return c=a.company,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(f.a.mark((function e(t,n){var a,c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("company/update/".concat(t),n,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=11;break}return r=c.company,e.abrupt("return",r);case 11:i=c.error,T.a.fire("Error",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("company/delete/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.company,n=e.setFetchingCompany,r=Object(c.useReducer)(S,t),i=Object(s.a)(r,2),o=i[0],d=i[1],j=o.name,b=o.phone,m=o.address,p=o._id,h=o.mainEmail,O=o.mainLogo,x=o.secondaryLogo,y=o.linkedin,g=o.facebook,N=o.twitter,C=o.instagram,k=A(o),w=k.values,F=k.setValues,E=k.handleInputChange,L=k.handleFileChange,V=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(p);case 2:d({type:u.companyDelete}),n(!0),t=o;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(l.a)(Object(l.a)({},w),{},Object(q.a)({},t,"")),F(Object(l.a)(Object(l.a)({},w),{},Object(q.a)({},t,""))),d({type:u.updateCompany,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){e.preventDefault(),d({type:u.updateCompany,payload:w})},P=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(p,o);case 2:n(!0),t=o,T.a.fire("\xa1Chachi!","Los cambios han sido guardados","success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Datos de empresa"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:P,children:"Guardar Cambios"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:V,children:"Borrar esta empresa"}),Object(a.jsxs)("div",{className:"editing",children:[Object(a.jsx)(M,{deleteField:D,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:E,editValue:j,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:E,editValue:m,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:E,editValue:b,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:E,editValue:h,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:L,editValue:O,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:L,editValue:x,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:E,editValue:N,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:E,editValue:g,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:E,editValue:C,submitEdit:B}),Object(a.jsx)(M,{deleteField:D,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:E,editValue:y,submitEdit:B})]})]})},B=function(e){e.company;var t=e.setFetchingCompany,n=A({}),c=n.values,r=n.handleInputChange,i=n.handleFileChange,s=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,V(c);case 3:a=e.sent,t(!0),a;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"add-form",onSubmit:s,children:[Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:r}),Object(a.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:r}),Object(a.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:r}),Object(a.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:r}),Object(a.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:r}),Object(a.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:r}),Object(a.jsxs)("div",{className:"input-images",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:i})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:i})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},P=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useReducer)(S,{}),o=Object(s.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){return n&&k("company").then((function(e){return e.json()})).then((function(e){return d({type:u.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)})),function(){r(!1)}}),[n,l]),Object(a.jsx)(a.Fragment,{children:l._id?Object(a.jsx)(D,{company:l,setFetchingCompany:r}):Object(a.jsx)(B,{setFetchingCompany:r,company:l})})},R=function(){var e=Object(v.a)(f.a.mark((function e(t,n){var a,c,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",{email:t,password:n},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return r={id:c.id,name:c.name,email:c.email,logged:!0,token:c.token},localStorage.setItem("mbr-user",JSON.stringify(r)),localStorage.setItem("mbr-token",c.token),e.abrupt("return",r);case 13:i=c.msg,T.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(v.a)(f.a.mark((function e(t,n,a){var c,r,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/signup",{name:t,email:n,password:a},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:if(!(r=e.sent).ok){e.next=13;break}return i={id:r.id,name:r.name,email:r.email,token:r.token,logged:!0},localStorage.setItem("mbr-user",JSON.stringify(i)),localStorage.setItem("mbr-token",r.token),e.abrupt("return",i);case 13:s=r.msg,T.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),G=function(){var e=A({}),t=e.values,n=e.handleInputChange,r=t.email,i=t.password,s=Object(c.useContext)(o).dispatch,l=function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R(r,i);case 3:n=e.sent,s({type:u.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:l,children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(a.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(a.jsx)(p.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},H=function(){var e=A({}),t=e.values,n=e.handleInputChange,r=t.name,i=t.email,s=t.password,l=t.password2,d=Object(c.useContext)(o).dispatch,j=function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==l){e.next=8;break}return e.next=4,_(r,i,s);case 4:n=e.sent,d({type:u.signup,payload:n}),e.next=9;break;case 8:T.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:j,children:[Object(a.jsx)("label",{children:"Nombre"}),Object(a.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(a.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(a.jsx)(p.b,{to:"/",children:"aqu\xed"})," "]})]})})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.getMaquinas:case u.getThisMaquinas:return t.payload;case u.maquinaUpdate:case u.addMaquina:return Object(l.a)({},t.payload);case u.featuresUpdate:return Object(l.a)(Object(l.a)({},e),{},{features:t.payload});case u.galleryUpdate:return Object(l.a)(Object(l.a)({},e),{},{gallery:t.payload});default:return e}},Y=function(e){var t=e.maquina,n=e.idx,c=e.getID,r=e.handleDeleteMaquina;return Object(a.jsxs)("article",{className:"maquina-card",children:[Object(a.jsx)("h6",{children:t.name}),Object(a.jsxs)("div",{className:"maquina-card-body",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:t.image,alt:t.name})}),Object(a.jsxs)("div",{className:"button-group",children:[Object(a.jsx)("button",{onClick:function(){return c(t._id)},className:"my-btn mini",children:"Editar"}),Object(a.jsx)("button",{onClick:function(){return r(t._id,n)},className:"my-btn mini secondary",children:"Borrar"})]})]})]})},z=n(12),K=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("maquinaria/nueva",t,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("maquinaria/actualizarMaquina/".concat(t),n,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("maquinaria/borrarMaquina/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=e.maquina,n=e.setShow,r=e.setFetchingMaquinaria,i=e.setmaquinaSelected,o=Object(c.useState)(),d=Object(s.a)(o,2),j=d[0],b=d[1],m=Object(c.useReducer)(J,t),p=Object(s.a)(m,2),h=p[0],O=p[1],x=A(h),g=x.values,N=x.setValues,C=x.handleInputChange,k=x.handleFileChange,w=g.features,S=g.name,q=g._id,F=g.gallery,T=g.image,E=function(){document.getElementById("to-reset").value=""},M=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,b(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){e.preventDefault(),O({type:u.maquinaUpdate,payload:g})},I=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(q,h);case 2:return e.next=4,r(!0);case 4:return e.next=6,i(h);case 6:return e.next=8,n(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:V,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===h||void 0===h?void 0:h.name)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.name})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:C,placeholder:S,name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:V,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===h||void 0===h?void 0:h.category)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.category})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:C,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),Object(a.jsx)("option",{value:"Maquinaria CNC",children:"Maquinaria CNC"}),Object(a.jsx)("option",{value:"Otra maquinaria",children:"Otra maquinaria"}),Object(a.jsx)("option",{value:"Maquinaria Convencional",children:"Maquinaria Convencional"})]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:V,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===h||void 0===h?void 0:h.image)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:T,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:k,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w.includes(j)||(N(Object(l.a)(Object(l.a)({},g),{},{features:[].concat(Object(z.a)(w),[j])})),O({type:u.featuresUpdate,payload:[].concat(Object(z.a)(w),[j])}),E()),E()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===h||void 0===h?void 0:h.features)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(z.a)(w);t.splice(e,1),N(Object(l.a)(Object(l.a)({},g),{},{features:t})),O({type:u.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset",onChange:function(e){b(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F.includes(j)||(N(Object(l.a)(Object(l.a)({},g),{},{gallery:[].concat(Object(z.a)(F),[j])})),O({type:u.galleryUpdate,payload:[].concat(Object(z.a)(F),[j])}),E()),E()},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===h||void 0===h?void 0:h.gallery)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"gallery",children:null===F||void 0===F?void 0:F.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:e}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(z.a)(F);t.splice(e,1),N(Object(l.a)(Object(l.a)({},g),{},{gallery:t})),O({type:u.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:M,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:I,children:"Guardar Cambios"})]})},Z=function(e){var t=e.setShow,n=e.setmaquinaSelected,r=e.setFetchingMaquinaria,i=Object(c.useState)(),o=Object(s.a)(i,2),d=o[0],j=o[1],b=Object(c.useReducer)(J),m=Object(s.a)(b,2),p=m[0],h=m[1],O=A(),x=O.values,g=O.setValues,N=O.handleInputChange,C=O.handleFileChange,k=x.features,w=x.gallery,S=x.image,q=function(){document.getElementById("to-reset-add").value=""},F=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,j(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){e.preventDefault(),h({type:u.addMaquina,payload:x})},E=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(p);case 2:return e.next=4,r(!0);case 4:return e.next=6,n(p);case 6:return e.next=8,t(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:T,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===p||void 0===p?void 0:p.name)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),(null===p||void 0===p?void 0:p.name)&&Object(a.jsx)("p",{className:"preview",children:null===p||void 0===p?void 0:p.name}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:N,placeholder:"Nombre de la m\xe1quina",name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:T,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===p||void 0===p?void 0:p.category)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),(null===p||void 0===p?void 0:p.category)&&Object(a.jsx)("p",{className:"preview",children:null===p||void 0===p?void 0:p.category}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:N,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),Object(a.jsx)("option",{value:"Maquinaria CNC",children:"Maquinaria CNC"}),Object(a.jsx)("option",{value:"Otra maquinaria",children:"Otra maquinaria"}),Object(a.jsx)("option",{value:"Maquinaria Convencional",children:"Maquinaria Convencional"})]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:T,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===p||void 0===p?void 0:p.image)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),S&&Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:S,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:C,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k?(null===k||void 0===k?void 0:k.includes(d))||(g(Object(l.a)(Object(l.a)({},x),{},{features:[].concat(Object(z.a)(k),[d])})),h({type:u.featuresUpdate,payload:[].concat(Object(z.a)(k),[d])}),q()):(g(Object(l.a)(Object(l.a)({},x),{},{features:[d]})),h({type:u.featuresUpdate,payload:[d]}),q()),q()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===p||void 0===p?void 0:p.features)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===k||void 0===k?void 0:k.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(z.a)(k);t.splice(e,1),g(Object(l.a)(Object(l.a)({},x),{},{features:t})),h({type:u.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-add",onChange:function(e){j(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w?(null===w||void 0===w?void 0:w.includes(d))||(g(Object(l.a)(Object(l.a)({},x),{},{gallery:[].concat(Object(z.a)(w),[d])})),h({type:u.galleryUpdate,payload:[].concat(Object(z.a)(w),[d])})):(g(Object(l.a)(Object(l.a)({},x),{},{gallery:[d]})),h({type:u.galleryUpdate,payload:[d]}))},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===p||void 0===p?void 0:p.gallery)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),w&&Object(a.jsx)("div",{className:"gallery",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(z.a)(w);t.splice(e,1),g(Object(l.a)(Object(l.a)({},x),{},{gallery:t})),h({type:u.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:F,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:E,children:"Guardar Cambios"})]})},$=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),o=Object(s.a)(i,2),l=o[0],d=o[1],j=Object(c.useState)(),b=Object(s.a)(j,2),m=b[0],p=b[1],h=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("maquinaria/".concat(t)).then((function(e){return e.json()})).then((function(e){return p(e.data)})).then((function(){return F(!0,"edit")})).catch((function(e){return new Error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(c.useState)(!0),x=Object(s.a)(O,2),y=x[0],g=x[1],N=Object(c.useReducer)(J),C=Object(s.a)(N,2),w=C[0],S=C[1];Object(c.useEffect)((function(){y&&k("maquinaria").then((function(e){return e.json()})).then((function(e){return S({type:u.getMaquinas,payload:e.data})})).then((function(){return g(!1)})).catch((function(e){return new Error(e)}))}),[y,m]);var q=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:g(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),d(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("section",{className:"maquinas-head",children:[Object(a.jsx)("h1",{children:"Maquinaria"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return F(!0,"add")},children:"A\xf1adir Maquina"})]}),Object(a.jsx)("section",{className:"all-maquinas",children:null===w||void 0===w?void 0:w.map((function(e){return Object(a.jsx)(Y,{maquina:e,getID:h,handleDeleteMaquina:q},e._id)}))}),Object(a.jsxs)(E.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:n,onHide:function(){return F(!1,"")},children:[function(e){if(n)switch(e){case"add":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E.a.Header,{children:Object(a.jsx)(E.a.Title,{children:"A\xf1adir M\xe1quina"})}),Object(a.jsx)(E.a.Body,{children:Object(a.jsx)(Z,{setShow:r,setFetchingMaquinaria:g,setmaquinaSelected:p})})]});case"edit":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E.a.Header,{children:Object(a.jsx)(E.a.Title,{children:"Editando M\xe1quina"})}),Object(a.jsx)(E.a.Body,{children:Object(a.jsx)(X,{setShow:r,maquina:m,setFetchingMaquinaria:g,setmaquinaSelected:p})})]})}}(l),Object(a.jsx)(E.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return F(!1,"")},children:"cerrar"})})]})]})},ee=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("section/new",t,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("section/update/".concat(n),t,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("section/delete/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.addSection:case u.sectionUpdate:return Object(l.a)({},t.payload);default:return e}},ce=function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,o=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(s.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(E.a,{className:"my-modals",show:p,onHide:O,children:[Object(a.jsx)(E.a.Header,{children:Object(a.jsx)(E.a.Title,{children:l})}),Object(a.jsx)(E.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:o,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(E.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})},re=function(e){var t=e.setFetchingSections,n=Object(c.useReducer)(ae),r=Object(s.a)(n,2),i=r[0],d=r[1],j=Object(c.useState)(!0),b=Object(s.a)(j,2),m=b[0],p=b[1],O=Object(h.h)().id,x=Object(h.g)(),y=Object(c.useContext)(o).user,g=A(),N=g.values,C=g.setValues,w=g.handleInputChange,S=N.title,F=N.text,T=N.subtitle,E=N._id;Object(c.useEffect)((function(){m&&k("section/".concat(O)).then((function(e){return e.json()})).then((function(e){C(e.section),d({type:u.addSection,payload:e.section})})).then((function(){return p(!1)})).catch((function(e){return new Error(e)}))}),[m,C,O]);var M=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.push("/mbr"),t(!0),e.next=4,ne(O);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(l.a)(Object(l.a)({},N),{},Object(q.a)({},t,"")),C(Object(l.a)(Object(l.a)({},N),{},Object(q.a)({},t,""))),d({type:u.sectionUpdate,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){e.preventDefault(),d({type:u.sectionUpdate,payload:N})},I=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(E,i);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("section",{className:"section-screen",children:[Object(a.jsxs)("h1",{children:["Secci\xf3n ",Object(a.jsx)("span",{children:null===i||void 0===i?void 0:i.sectionName})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:I,children:"Guardar Cambios"}),"admin@yai.com"===y.email&&Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:M,children:"Borrar esta empresa"}),(S||""===S)&&Object(a.jsx)(ce,{nameValue:"title",deleteField:L,inputType:"text",editLabel:"T\xedtulo",editAction:w,editValue:null===i||void 0===i?void 0:i.title,submitEdit:V}),T&&Object(a.jsx)(ce,{nameValue:"subtitle",deleteField:L,inputType:"text",editLabel:"Subt\xedtulo",editAction:w,editValue:null===i||void 0===i?void 0:i.subtitle,submitEdit:V}),F&&Object(a.jsx)(ce,{nameValue:"text",deleteField:L,inputType:"text",editLabel:"Texto",editAction:w,editValue:null===i||void 0===i?void 0:i.text,submitEdit:V})]})},ie=function(e){var t=e.setFetchingSections,n=e.handleClose,r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],u=i[1],d=A(),j=d.values,b=d.setValues,m=d.handleInputChange,p=d.handleFileChange,h=j.uniqueImage,O=j.gallery,x=j.features,g=j.formInputs,N=function(e){document.getElementById(e).value=""},C=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,u(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,ee(j);case 3:t(!0),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"section-form",onSubmit:k,children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("label",{children:["Tipo de secci\xf3n* ",(null===j||void 0===j?void 0:j.sectionType)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsxs)("select",{onChange:m,name:"sectionType",required:!0,children:[Object(a.jsx)("option",{value:"section",defaultValue:!0,children:"Secci\xf3n"}),Object(a.jsx)("option",{value:"nav",children:"Navegador"}),Object(a.jsx)("option",{value:"header",children:"Cabecera"}),Object(a.jsx)("option",{value:"footer",children:"Footer"})]}),Object(a.jsxs)("label",{children:["Nombre de la secci\xf3n* ",(null===j||void 0===j?void 0:j.sectionName)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:m,name:"sectionName",autoComplete:"off",placeholder:"Nombre de la secci\xf3n",required:!0}),Object(a.jsxs)("label",{children:["T\xedtulo ",(null===j||void 0===j?void 0:j.title)&&Object(a.jsx)(y.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:m,autoComplete:"off",name:"title",placeholder:"T\xedtulo",required:!0}),Object(a.jsx)("label",{children:"Subt\xedtulo "}),Object(a.jsx)("input",{type:"text",onChange:m,autoComplete:"off",name:"subtitle",placeholder:"Subt\xedtulo"}),Object(a.jsx)("label",{children:"Texto "}),Object(a.jsx)("textarea",{type:"text",onChange:m,autoComplete:"off",name:"text",placeholder:"Texto"}),Object(a.jsx)("label",{children:"Imagen principal"}),h&&Object(a.jsx)("figure",{className:"unique-image",children:Object(a.jsx)("img",{src:h,alt:""})}),Object(a.jsx)("input",{className:"file-input",type:"file",onChange:p,name:"uniqueImage"})]}),Object(a.jsxs)("div",{className:"right-side",children:[Object(a.jsx)("label",{htmlFor:"",children:"Galer\xeda de im\xe1genes"}),Object(a.jsx)("div",{className:"gallery",children:null===O||void 0===O?void 0:O.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(y.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(z.a)(O);t.splice(e,1),b(Object(l.a)(Object(l.a)({},j),{},{gallery:t}))}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:C,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),O?(null===O||void 0===O?void 0:O.includes(o))||b(Object(l.a)(Object(l.a)({},j),{},{gallery:[].concat(Object(z.a)(O),[o])})):b(Object(l.a)(Object(l.a)({},j),{},{gallery:[o]}))},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(a.jsx)("label",{htmlFor:"",children:"Caracter\xedsticas"}),Object(a.jsx)("div",{className:"features",children:null===x||void 0===x?void 0:x.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(z.a)(x);t.splice(e,1),b(Object(l.a)(Object(l.a)({},j),{},{features:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-features",onChange:function(e){u(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),x?(null===x||void 0===x?void 0:x.includes(o))||(b(Object(l.a)(Object(l.a)({},j),{},{features:[].concat(Object(z.a)(x),[o])})),N("to-reset-features")):(b(Object(l.a)(Object(l.a)({},j),{},{features:[o]})),N("to-reset-features")),N("to-reset-features")},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(a.jsx)("label",{children:"Inputs del formulario"}),Object(a.jsx)("div",{className:"features",children:null===g||void 0===g?void 0:g.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(y.a,{onClick:function(){return function(e){var t=Object(z.a)(g);t.splice(e,1),b(Object(l.a)(Object(l.a)({},j),{},{formInputs:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-inputs",onChange:function(e){u(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),g?(null===g||void 0===g?void 0:g.includes(o))||(b(Object(l.a)(Object(l.a)({},j),{},{formInputs:[].concat(Object(z.a)(g),[o])})),N("to-reset-inputs")):(b(Object(l.a)(Object(l.a)({},j),{},{formInputs:[o]})),N("to-reset-inputs")),N("to-reset-inputs")},className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Guardar Datos"})]})})},se=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),u=Object(s.a)(i,2),d=u[0],j=u[1];Object(c.useEffect)((function(){n&&k("section").then((function(e){return e.json()})).then((function(e){return j(e.sections)})).then((function(){return r(!1)})).catch((function(e){return new Error(e)}))}),[n]);var b=Object(c.useContext)(o).user,m=Object(c.useState)(!1),x=Object(s.a)(m,2),f=x[0],v=x[1],y=function(){return v(!1)};return Object(a.jsx)(p.a,{children:Object(a.jsx)("div",{children:b.token?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"dashboard-container",children:[Object(a.jsx)(g,{sections:d,handleShow:function(){return v(!0)}}),Object(a.jsxs)("main",{children:[Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:"/mbr",component:N}),Object(a.jsx)(h.b,{path:"/mbr/empresa",component:P}),Object(a.jsx)(h.b,{path:"/mbr/maquinaria",component:$}),Object(a.jsx)(h.b,{path:"/mbr/seccion/:id",component:function(e){return Object(a.jsx)(re,Object(l.a)(Object(l.a)({},e),{},{setFetchingSections:r}))}}),Object(a.jsx)(h.a,{to:"/mbr"})]}),Object(a.jsxs)(E.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:f,onHide:y,children:[Object(a.jsx)(E.a.Header,{children:Object(a.jsx)("h1",{children:"A\xf1adir Secci\xf3n a la web"})}),Object(a.jsx)(E.a.Body,{children:Object(a.jsx)(ie,{handleClose:y,setFetchingSections:r})}),Object(a.jsx)(E.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:y,children:"cerrar"})})]})]})]})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O,{}),Object(a.jsxs)("main",{className:"container",children:[Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:"/",component:G}),Object(a.jsx)(h.b,{path:"/registro",component:H}),Object(a.jsx)(h.a,{to:"/"})]}),Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."})]})]})})})};j.b.add(b.a,m.d,m.b,m.c,m.a);var oe=function(){return JSON.parse(localStorage.getItem("mbr-user"))||{logged:!1}},le=function(){var e=Object(c.useReducer)(d,{},oe),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!0),l=Object(s.a)(i,2),u=l[0],j=l[1];return Object(c.useEffect)((function(){return u&&localStorage.setItem("mbr-user",JSON.stringify(n)),function(){j(!1)}}),[n,u]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(o.Provider,{value:{user:n,dispatch:r},children:Object(a.jsx)(se,{})})})};i.a.render(Object(a.jsx)(le,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.0842667c.chunk.js.map