(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),i=n(20),s=n.n(i),o=n(7),l=(0,n(1).createContext)(),u=n(2),d={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",deleteProperty:"[company] deleteProperty",addSection:"[sections] addSection",getMaquinas:"[Maquina] getMaquina",getThisMaquinas:"[Maquina] getThisMaquina",updateThisMaquinas:"[Maquina] updateThisMaquinas",addMaquina:"[Maquina] addMaquina",maquinaUpdate:"[Maquina] MaquinaUpdate",maquinaDelete:"[Maquina] MaquinaDelete",featuresUpdate:"[Maquina] featuresUpdate",galleryUpdate:"[Maquina] galleryUpdate",getSections:"[Section] getSections",sectionUpdate:"[Section] sectionUpdate",deleteSection:"[Section] deleteSection",updateThis:"[Section] updateThis"},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.login:case d.signup:case d.hasToken:return Object(u.a)({},t.payload);case d.logout:return{logged:!1};default:return e}},b=(n(38),n(39),n(22)),m=n(32),p=n(23),h=n(15),O=n(12),x=function(){return Object(a.jsx)("nav",{className:"login-nav",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/",children:"Entrar"})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/registro",children:"Registro"})})]})]})})},f=n(3),v=n.n(f),y=n(5),g=n(9),N=(0,n(1).createContext)(),C=function(e){var t=e.handleShow,n=Object(c.useContext)(N).sections,r=Object(c.useContext)(l),i=r.dispatch,s=r.user,o=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({type:d.logout});case 2:return e.next=4,localStorage.removeItem("mbr-token");case 4:return e.next=6,localStorage.removeItem("mbr-user");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"dash-nav",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr",children:Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/mbr-app/image/upload/v1605125325/logoSecundario_lnnyol.svg",alt:""})})})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/empresa",children:"Datos de empresa"})}),Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/maquinaria",children:"Maquinaria"})}),Object(a.jsxs)("li",{className:"dropdown",children:[Object(a.jsxs)("p",{"data-toggle":"dropdown",children:["Secciones de la web ",Object(a.jsx)(g.a,{icon:"chevron-down"})]}),n.length>0&&Object(a.jsx)("ul",{className:"dropdown-menu",children:n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(h.b,{to:"/mbr/seccion/".concat(e._id),children:e.sectionName})},e._id)}))})]})]}),Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."}),"admin@yai.com"===s.email&&Object(a.jsx)("button",{className:"my-btn third mini",onClick:t,children:"A\xf1adir Secci\xf3n"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:o,children:"Cerrar Sesi\xf3n"})]})]})})},k=function(){var e=Object(c.useContext)(l).user;return Object(a.jsx)("div",{children:Object(a.jsxs)("h1",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},w="https://mbr-cms.herokuapp.com/api",S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(w,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(w,"/").concat(e),c=localStorage.getItem("mbr-token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getCompany:case d.addCompnany:case d.companyUpdate:case d.deleteProperty:return Object(u.a)({},t.payload);case d.companyDelete:return{};default:return e}},F=n(19),E=n(17),I=n.n(E),M=n(10),A=function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,s=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(o.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(M.a,{className:"edit-modal my-modals",show:p,onHide:O,children:[Object(a.jsx)(M.a.Header,{children:Object(a.jsx)(M.a.Title,{children:l})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:s,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})},L=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/mbr-app/upload",(n=new FormData).append("upload_preset","mbr-app"),n.append("file",t),e.next=6,fetch("https://api.cloudinary.com/v1_1/mbr-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return a=e.secure_url})).catch((function(e){return console.log(e)}));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1],i=function(){r(e)},s=function(e){var t=e.target;r(Object(u.a)(Object(u.a)({},a),{},Object(F.a)({},t.name,t.value)))},l=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,c=n.files[0],e.next=4,L(c);case 4:return i=e.sent,e.next=7,r(Object(u.a)(Object(u.a)({},a),{},Object(F.a)({},n.name,i)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:r,handleInputChange:s,handleFileChange:l,resetForm:i}},D=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("company/new",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return c=a.company,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("company/update/".concat(t),n,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=11;break}return r=c.company,e.abrupt("return",r);case 11:i=c.error,I.a.fire("Error",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("company/delete/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=e.company,n=e.setFetchingCompany,r=Object(c.useReducer)(T,t),i=Object(o.a)(r,2),s=i[0],l=i[1],j=s.name,b=s.phone,m=s.address,p=s._id,h=s.mainEmail,O=s.mainLogo,x=s.secondaryLogo,f=s.linkedin,g=s.facebook,N=s.twitter,C=s.instagram,k=V(s),w=k.values,S=k.setValues,q=k.handleInputChange,E=k.handleFileChange,M=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(p);case 2:l({type:d.companyDelete}),n(!0),t=s;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(Object(u.a)({},w),{},Object(F.a)({},t,"")),S(Object(u.a)(Object(u.a)({},w),{},Object(F.a)({},t,""))),l({type:d.updateCompany,payload:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){e.preventDefault(),l({type:d.updateCompany,payload:w})},B=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(p,s);case 2:n(!0),t=s,I.a.fire("\xa1Chachi!","Los cambios han sido guardados","success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Datos de empresa"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:B,children:"Guardar Cambios"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:M,children:"Borrar esta empresa"}),Object(a.jsxs)("div",{className:"editing",children:[Object(a.jsx)(A,{deleteField:L,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:q,editValue:j,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:q,editValue:m,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:q,editValue:b,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:q,editValue:h,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:E,editValue:O,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:E,editValue:x,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:q,editValue:N,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:q,editValue:g,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:q,editValue:C,submitEdit:D}),Object(a.jsx)(A,{deleteField:L,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:q,editValue:f,submitEdit:D})]})]})},R=function(e){e.company;var t=e.setFetchingCompany,n=V({}),c=n.values,r=n.handleInputChange,i=n.handleFileChange,s=function(){var e=Object(y.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,D(c);case 3:a=e.sent,t(!0),a;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"add-form",onSubmit:s,children:[Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:r}),Object(a.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:r}),Object(a.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:r}),Object(a.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:r}),Object(a.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:r}),Object(a.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:r}),Object(a.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:r}),Object(a.jsxs)("div",{className:"input-images",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:i})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:i})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},_=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useReducer)(T,{}),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){return n&&S("company").then((function(e){return e.json()})).then((function(e){return u({type:d.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)})),function(){r(!1)}}),[n,l]),Object(a.jsx)(a.Fragment,{children:l._id?Object(a.jsx)(B,{company:l,setFetchingCompany:r}):Object(a.jsx)(R,{setFetchingCompany:r,company:l})})},G=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a,c,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("auth/login",{email:t,password:n},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return r={id:c.id,name:c.name,email:c.email,logged:!0,token:c.token},localStorage.setItem("mbr-user",JSON.stringify(r)),localStorage.setItem("mbr-token",c.token),e.abrupt("return",r);case 13:i=c.msg,I.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var c,r,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("auth/signup",{name:t,email:n,password:a},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:if(!(r=e.sent).ok){e.next=13;break}return i={id:r.id,name:r.name,email:r.email,token:r.token,logged:!0},localStorage.setItem("mbr-user",JSON.stringify(i)),localStorage.setItem("mbr-token",r.token),e.abrupt("return",i);case 13:s=r.msg,I.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),J=function(){var e=V({}),t=e.values,n=e.handleInputChange,r=t.email,i=t.password,s=Object(c.useContext)(l).dispatch,o=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,G(r,i);case 3:n=e.sent,s({type:d.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:o,children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(a.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(a.jsx)(h.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},Y=function(){var e=V({}),t=e.values,n=e.handleInputChange,r=t.name,i=t.email,s=t.password,o=t.password2,u=Object(c.useContext)(l).dispatch,j=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==o){e.next=8;break}return e.next=4,H(r,i,s);case 4:n=e.sent,u({type:d.signup,payload:n}),e.next=9;break;case 8:I.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:j,children:[Object(a.jsx)("label",{children:"Nombre"}),Object(a.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(a.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(a.jsx)(h.b,{to:"/",children:"aqu\xed"})," "]})]})})},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getMaquinas:case d.getThisMaquinas:return t.payload;case d.maquinaUpdate:case d.addMaquina:return Object(u.a)({},t.payload);case d.featuresUpdate:return Object(u.a)(Object(u.a)({},e),{},{features:t.payload});case d.galleryUpdate:return Object(u.a)(Object(u.a)({},e),{},{gallery:t.payload});default:return e}},K=function(e){var t=e.maquina,n=e.idx,c=e.getID,r=e.handleDeleteMaquina;return Object(a.jsxs)("article",{className:"maquina-card",children:[Object(a.jsx)("h6",{children:t.name}),Object(a.jsxs)("div",{className:"maquina-card-body",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:t.image,alt:t.name})}),Object(a.jsxs)("div",{className:"button-group",children:[Object(a.jsx)("button",{onClick:function(){return c(t._id)},className:"my-btn mini",children:"Editar"}),Object(a.jsx)("button",{onClick:function(){return r(t._id,n)},className:"my-btn mini secondary",children:"Borrar"})]})]})]})},Q=n(8),W=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("maquinaria/nueva",t,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(y.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("maquinaria/actualizarMaquina/".concat(t),n,"POST");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("maquinaria/borrarMaquina/".concat(t),{},"POST");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=e.maquina,n=e.setShow,r=e.setFetchingMaquinaria,i=e.setmaquinaSelected,s=Object(c.useState)(),l=Object(o.a)(s,2),j=l[0],b=l[1],m=Object(c.useReducer)(z,t),p=Object(o.a)(m,2),h=p[0],O=p[1],x=V(h),f=x.values,N=x.setValues,C=x.handleInputChange,k=x.handleFileChange,w=f.features,S=f.name,q=f._id,T=f.gallery,F=f.image,E=function(){document.getElementById("to-reset").value=""},I=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,b(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){e.preventDefault(),O({type:d.maquinaUpdate,payload:f})},A=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(q,h);case 2:return e.next=4,r(!0);case 4:return e.next=6,i(h);case 6:return e.next=8,n(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===h||void 0===h?void 0:h.name)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.name})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:C,placeholder:S,name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===h||void 0===h?void 0:h.category)&&Object(a.jsx)("p",{className:"preview",children:null===h||void 0===h?void 0:h.category})]}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:C,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),Object(a.jsx)("option",{value:"Maquinaria CNC",children:"Maquinaria CNC"}),Object(a.jsx)("option",{value:"Otra maquinaria",children:"Otra maquinaria"}),Object(a.jsx)("option",{value:"Maquinaria Convencional",children:"Maquinaria Convencional"})]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:M,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===h||void 0===h?void 0:h.image)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:F,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:k,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"Cambiar"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w.includes(j)||(N(Object(u.a)(Object(u.a)({},f),{},{features:[].concat(Object(Q.a)(w),[j])})),O({type:d.featuresUpdate,payload:[].concat(Object(Q.a)(w),[j])}),E()),E()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===h||void 0===h?void 0:h.features)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(w);t.splice(e,1),N(Object(u.a)(Object(u.a)({},f),{},{features:t})),O({type:d.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset",onChange:function(e){b(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T.includes(j)||(N(Object(u.a)(Object(u.a)({},f),{},{gallery:[].concat(Object(Q.a)(T),[j])})),O({type:d.galleryUpdate,payload:[].concat(Object(Q.a)(T),[j])}),E()),E()},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===h||void 0===h?void 0:h.gallery)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"gallery",children:null===T||void 0===T?void 0:T.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:e}),Object(a.jsx)(g.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(Q.a)(T);t.splice(e,1),N(Object(u.a)(Object(u.a)({},f),{},{gallery:t})),O({type:d.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:I,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:A,children:"Guardar Cambios"})]})},ee=function(e){var t=e.setShow,n=e.setmaquinaSelected,r=e.setFetchingMaquinaria,i=Object(c.useState)(),s=Object(o.a)(i,2),l=s[0],j=s[1],b=Object(c.useReducer)(z),m=Object(o.a)(b,2),p=m[0],h=m[1],O=V(),x=O.values,f=O.setValues,N=O.handleInputChange,C=O.handleFileChange,k=x.features,w=x.gallery,S=x.image,q=function(){document.getElementById("to-reset-add").value=""},T=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,j(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){e.preventDefault(),h({type:d.addMaquina,payload:x})},E=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(p);case 2:return e.next=4,r(!0);case 4:return e.next=6,n(p);case 6:return e.next=8,t(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("article",{className:"modal-edit",children:[Object(a.jsxs)("p",{children:['Para que lo que se introduzca funcione, tienes que escribir lo que sea, darle al bot\xf3n "A\xf1adir" y esperar a que salga este icono. ',Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsxs)("div",{className:"edit-maquina",children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("form",{onSubmit:F,children:[Object(a.jsxs)("label",{children:["Nombre de la maquina* ",(null===p||void 0===p?void 0:p.name)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),(null===p||void 0===p?void 0:p.name)&&Object(a.jsx)("p",{className:"preview",children:null===p||void 0===p?void 0:p.name}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",onChange:N,placeholder:"Nombre de la m\xe1quina",name:"name"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:F,children:[Object(a.jsxs)("label",{children:["Tipo de maquina* ",(null===p||void 0===p?void 0:p.category)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),(null===p||void 0===p?void 0:p.category)&&Object(a.jsx)("p",{className:"preview",children:null===p||void 0===p?void 0:p.category}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsxs)("select",{onChange:N,name:"category",required:!0,children:[Object(a.jsx)("option",{defaultValue:!0,children:"Seleccionar..."}),Object(a.jsx)("option",{value:"Maquinaria CNC",children:"Maquinaria CNC"}),Object(a.jsx)("option",{value:"Otra maquinaria",children:"Otra maquinaria"}),Object(a.jsx)("option",{value:"Maquinaria Convencional",children:"Maquinaria Convencional"})]}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:F,children:[Object(a.jsxs)("label",{children:["Imagen principal* ",(null===p||void 0===p?void 0:p.image)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),S&&Object(a.jsx)("figure",{className:"main-image",children:Object(a.jsx)("img",{src:S,alt:""})}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:C,name:"image"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k?(null===k||void 0===k?void 0:k.includes(l))||(f(Object(u.a)(Object(u.a)({},x),{},{features:[].concat(Object(Q.a)(k),[l])})),h({type:d.featuresUpdate,payload:[].concat(Object(Q.a)(k),[l])}),q()):(f(Object(u.a)(Object(u.a)({},x),{},{features:[l]})),h({type:d.featuresUpdate,payload:[l]}),q()),q()},children:[Object(a.jsxs)("label",{children:["Caracter\xedsticas de la maquina ",(null===p||void 0===p?void 0:p.features)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("div",{className:"features",children:null===k||void 0===k?void 0:k.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(k);t.splice(e,1),f(Object(u.a)(Object(u.a)({},x),{},{features:t})),h({type:d.featuresUpdate,payload:t})}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-add",onChange:function(e){j(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(a.jsx)("div",{className:"right-side",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w?(null===w||void 0===w?void 0:w.includes(l))||(f(Object(u.a)(Object(u.a)({},x),{},{gallery:[].concat(Object(Q.a)(w),[l])})),h({type:d.galleryUpdate,payload:[].concat(Object(Q.a)(w),[l])})):(f(Object(u.a)(Object(u.a)({},x),{},{gallery:[l]})),h({type:d.galleryUpdate,payload:[l]}))},children:[Object(a.jsxs)("label",{children:["Galer\xeda de fotos de la m\xe1quina ",(null===p||void 0===p?void 0:p.gallery)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),w&&Object(a.jsx)("div",{className:"gallery",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(g.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(Q.a)(w);t.splice(e,1),f(Object(u.a)(Object(u.a)({},x),{},{gallery:t})),h({type:d.galleryUpdate,payload:t})}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:T,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini third",children:"A\xf1adir"})]})]})})]}),Object(a.jsx)("button",{className:"my-btn secondary",onClick:E,children:"Guardar Cambios"})]})},te=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(o.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(),b=Object(o.a)(j,2),m=b[0],p=b[1],h=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("maquinaria/".concat(t)).then((function(e){return e.json()})).then((function(e){return p(e.data)})).then((function(){return T(!0,"edit")})).catch((function(e){return new Error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(c.useState)(!0),x=Object(o.a)(O,2),f=x[0],g=x[1],N=Object(c.useReducer)(z),C=Object(o.a)(N,2),k=C[0],w=C[1];Object(c.useEffect)((function(){f&&S("maquinaria").then((function(e){return e.json()})).then((function(e){return w({type:d.getMaquinas,payload:e.data})})).then((function(){return g(!1)})).catch((function(e){return new Error(e)}))}),[f,m]);var q=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:g(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(y.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),u(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("section",{className:"maquinas-head",children:[Object(a.jsx)("h1",{children:"Maquinaria"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return T(!0,"add")},children:"A\xf1adir Maquina"})]}),Object(a.jsx)("section",{className:"all-maquinas",children:null===k||void 0===k?void 0:k.map((function(e){return Object(a.jsx)(K,{maquina:e,getID:h,handleDeleteMaquina:q},e._id)}))}),Object(a.jsxs)(M.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:n,onHide:function(){return T(!1,"")},children:[function(e){if(n)switch(e){case"add":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(M.a.Header,{children:Object(a.jsx)(M.a.Title,{children:"A\xf1adir M\xe1quina"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsx)(ee,{setShow:r,setFetchingMaquinaria:g,setmaquinaSelected:p})})]});case"edit":return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(M.a.Header,{children:Object(a.jsx)(M.a.Title,{children:"Editando M\xe1quina"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsx)($,{setShow:r,maquina:m,setFetchingMaquinaria:g,setmaquinaSelected:p})})]})}}(l),Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return T(!1,"")},children:"cerrar"})})]})]})},ne=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("section/new",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.section);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("section/update/".concat(n),t,"POST");case 2:return e.next=4,S("section");case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c.sections);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("section/delete/".concat(t),{},"POST");case 2:return e.next=4,S("section");case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a.sections);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=r.a.memo((function(e){var t=e.nameValue,n=e.deleteField,r=e.inputType,i=e.editLabel,s=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(c.useState)(!1),m=Object(o.a)(b,2),p=m[0],h=m[1],O=function(){return h(!1)},x=function(){return h(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:x,children:"A\xf1adir"})]}),Object(a.jsxs)(M.a,{className:"my-modals",show:p,onHide:O,children:[Object(a.jsx)(M.a.Header,{children:Object(a.jsx)(M.a.Title,{children:l})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:r,onChange:s,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:O,children:"Guardar"})]})}),Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:O,children:"cerrar"})})]})]})})),ie=function(){var e=Object(c.useContext)(l).user,t=Object(c.useContext)(N),n=t.dispatchSections,r=t.sections,i=Object(O.h)().id,s=V(),j=s.values,b=s.setValues,m=s.handleInputChange,p=s.handleFileChange,h=j.title,x=j.text,f=j.subtitle,C=j._id,k=j.uniqueImage,w=j.gallery,S=j.features,q=j.formInputs,T=Object(O.g)(),E=Object(c.useRef)(),M=Object(c.useState)(),A=Object(o.a)(M,2),D=A[0],U=A[1];Object(c.useEffect)((function(){r.length>0&&(E.current=r.find((function(e){return e._id===i})),b(E.current))}),[i,r,b]);var P=function(e){document.getElementById(e).value=""},B=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,U(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.push("/mbr"),e.next=3,ce(i);case 3:t=e.sent,n({type:d.deleteSection,payload:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(Object(u.a)(Object(u.a)({},j),{},Object(F.a)({},t,"")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){e.preventDefault()},H=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(j,C);case 2:t=e.sent,n({type:d.sectionUpdate,payload:t}),I.a.fire("\xa1Chachi!","Los cambios han sido guardados","success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"section-screen",children:[Object(a.jsxs)("h1",{children:["Secci\xf3n ",Object(a.jsx)("span",{children:null===j||void 0===j?void 0:j.sectionName})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:H,children:"Guardar Cambios"}),"admin@yai.com"===e.email&&Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:R,children:"Borrar esta secci\xf3n"}),(h||""===h)&&Object(a.jsx)(re,{nameValue:"title",deleteField:_,inputType:"text",editLabel:"T\xedtulo",editAction:m,editValue:null===j||void 0===j?void 0:j.title,submitEdit:G}),f&&Object(a.jsx)(re,{nameValue:"subtitle",deleteField:_,inputType:"text",editLabel:"Subt\xedtulo",editAction:m,editValue:null===j||void 0===j?void 0:j.subtitle,submitEdit:G}),x&&Object(a.jsx)(re,{nameValue:"text",deleteField:_,inputType:"text",editLabel:"Texto",editAction:m,editValue:null===j||void 0===j?void 0:j.text,submitEdit:G}),k&&Object(a.jsx)(re,{imageEdit:!0,nameValue:"uniqueImage",deleteField:_,inputType:"file",editLabel:"Imagen principal",editAction:p,editValue:null===j||void 0===j?void 0:j.uniqueImage,submitEdit:G}),(null===w||void 0===w?void 0:w.length)>0&&Object(a.jsxs)("div",{className:"edit-gallery",children:[Object(a.jsx)("div",{className:"gallery",children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(g.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(Q.a)(w);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{gallery:t}))}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:B,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),w?(null===w||void 0===w?void 0:w.includes(D))||b(Object(u.a)(Object(u.a)({},j),{},{gallery:[].concat(Object(Q.a)(w),[D])})):b(Object(u.a)(Object(u.a)({},j),{},{gallery:[D]}))},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===S||void 0===S?void 0:S.length)>0&&Object(a.jsxs)("div",{className:"edit-features",children:[Object(a.jsx)("div",{className:"features",children:null===S||void 0===S?void 0:S.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(S);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{features:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-features",onChange:function(e){U(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),S?(null===S||void 0===S?void 0:S.includes(D))||(b(Object(u.a)(Object(u.a)({},j),{},{features:[].concat(Object(Q.a)(S),[D])})),P("to-reset-features")):(b(Object(u.a)(Object(u.a)({},j),{},{features:[D]})),P("to-reset-features")),P("to-reset-features")},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===q||void 0===q?void 0:q.length)>0&&Object(a.jsxs)("div",{className:"edit-features",children:[Object(a.jsx)("div",{className:"features",children:null===q||void 0===q?void 0:q.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(q);t.splice(e,1),b(Object(u.a)(Object(u.a)({},j),{},{formInputs:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-inputs",onChange:function(e){U(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),q?(null===q||void 0===q?void 0:q.includes(D))||(b(Object(u.a)(Object(u.a)({},j),{},{formInputs:[].concat(Object(Q.a)(q),[D])})),P("to-reset-inputs")):(b(Object(u.a)(Object(u.a)({},j),{},{formInputs:[D]})),P("to-reset-inputs")),P("to-reset-inputs")},className:"my-btn mini",children:"A\xf1adir"})]})]})]})})},se=function(e){var t=e.handleClose,n=Object(c.useContext)(N).dispatchSections,r=Object(c.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1],j=V(),b=j.values,m=j.setValues,p=j.handleInputChange,h=j.handleFileChange,O=b.uniqueImage,x=b.gallery,f=b.features,C=b.formInputs,k=function(e){document.getElementById(e).value=""},w=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,L(a);case 4:c=e.sent,l(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(y.a)(v.a.mark((function e(a){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,ne(b);case 3:c=e.sent,n({type:d.addSection,payload:c}),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"section-form",onSubmit:S,children:[Object(a.jsxs)("div",{className:"left-side",children:[Object(a.jsxs)("label",{children:["Tipo de secci\xf3n* ",(null===b||void 0===b?void 0:b.sectionType)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsxs)("select",{onChange:p,name:"sectionType",required:!0,children:[Object(a.jsx)("option",{value:"section",defaultValue:!0,children:"Secci\xf3n"}),Object(a.jsx)("option",{value:"nav",children:"Navegador"}),Object(a.jsx)("option",{value:"header",children:"Cabecera"}),Object(a.jsx)("option",{value:"footer",children:"Footer"})]}),Object(a.jsxs)("label",{children:["Nombre de la secci\xf3n* ",(null===b||void 0===b?void 0:b.sectionName)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:p,name:"sectionName",autoComplete:"off",placeholder:"Nombre de la secci\xf3n",required:!0}),Object(a.jsxs)("label",{children:["T\xedtulo ",(null===b||void 0===b?void 0:b.title)&&Object(a.jsx)(g.a,{className:"check-ok",icon:"check-circle"})]}),Object(a.jsx)("input",{type:"text",onChange:p,autoComplete:"off",name:"title",placeholder:"T\xedtulo",required:!0}),Object(a.jsx)("label",{children:"Subt\xedtulo "}),Object(a.jsx)("input",{type:"text",onChange:p,autoComplete:"off",name:"subtitle",placeholder:"Subt\xedtulo"}),Object(a.jsx)("label",{children:"Texto "}),Object(a.jsx)("textarea",{type:"text",onChange:p,autoComplete:"off",name:"text",placeholder:"Texto"}),Object(a.jsx)("label",{children:"Imagen principal"}),O&&Object(a.jsx)("figure",{className:"unique-image",children:Object(a.jsx)("img",{src:O,alt:""})}),Object(a.jsx)("input",{className:"file-input",type:"file",onChange:h,name:"uniqueImage"})]}),Object(a.jsxs)("div",{className:"right-side",children:[Object(a.jsx)("label",{htmlFor:"",children:"Galer\xeda de im\xe1genes"}),Object(a.jsx)("div",{className:"gallery",children:null===x||void 0===x?void 0:x.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(g.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(Q.a)(x);t.splice(e,1),m(Object(u.a)(Object(u.a)({},b),{},{gallery:t}))}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsxs)("div",{className:"button-file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:w,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),x?(null===x||void 0===x?void 0:x.includes(s))||m(Object(u.a)(Object(u.a)({},b),{},{gallery:[].concat(Object(Q.a)(x),[s])})):m(Object(u.a)(Object(u.a)({},b),{},{gallery:[s]}))},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(a.jsx)("label",{htmlFor:"",children:"Caracter\xedsticas"}),Object(a.jsx)("div",{className:"features",children:null===f||void 0===f?void 0:f.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(f);t.splice(e,1),m(Object(u.a)(Object(u.a)({},b),{},{features:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-section-features",onChange:function(e){l(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),f?(null===f||void 0===f?void 0:f.includes(s))||(m(Object(u.a)(Object(u.a)({},b),{},{features:[].concat(Object(Q.a)(f),[s])})),k("to-reset-section-features")):(m(Object(u.a)(Object(u.a)({},b),{},{features:[s]})),k("to-reset-section-features")),k("to-reset-section-features")},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(a.jsx)("label",{children:"Inputs del formulario"}),Object(a.jsx)("div",{className:"features",children:null===C||void 0===C?void 0:C.map((function(e,t){return Object(a.jsxs)("div",{className:"each-feat",children:[e,Object(a.jsx)(g.a,{onClick:function(){return function(e){var t=Object(Q.a)(C);t.splice(e,1),m(Object(u.a)(Object(u.a)({},b),{},{formInputs:t}))}(t)},icon:"times-circle"})]},e)}))}),Object(a.jsxs)("div",{className:"button-input-group",children:[Object(a.jsx)("input",{type:"text",id:"to-reset-section-inputs",onChange:function(e){l(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),C?(null===C||void 0===C?void 0:C.includes(s))||(m(Object(u.a)(Object(u.a)({},b),{},{formInputs:[].concat(Object(Q.a)(C),[s])})),k("to-reset-section-inputs")):(m(Object(u.a)(Object(u.a)({},b),{},{formInputs:[s]})),k("to-reset-section-inputs")),k("to-reset-section-inputs")},className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Guardar Datos"})]})})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.getSections:return t.payload;case d.addSection:return[].concat(Object(Q.a)(e),[t.payload]);case d.deleteSection:return t.payload;case d.updateThis:return Object(u.a)({},t.payload);case d.sectionUpdate:return t.payload;default:return e}},le=function(){var e=Object(c.useRef)(!0),t=Object(c.useContext)(l).user,n=Object(c.useReducer)(oe,{}),r=Object(o.a)(n,2),i=r[0],s=r[1];Object(c.useEffect)((function(){return function(){e.current=!1}})),Object(c.useEffect)((function(){e.current&&S("section").then((function(e){return e.json()})).then((function(e){return s({type:d.getSections,payload:e.sections})})).catch((function(e){return new Error(e)}))}),[]);var j=Object(c.useState)(!1),b=Object(o.a)(j,2),m=b[0],p=b[1],f=function(){return p(!1)};return Object(a.jsx)(h.a,{children:Object(a.jsx)("div",{children:t.token?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(N.Provider,{value:{sections:i,dispatchSections:s},children:Object(a.jsxs)("div",{className:"dashboard-container",children:[Object(a.jsx)(C,{handleShow:function(){return p(!0)}}),Object(a.jsxs)("main",{children:[Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/mbr",component:k}),Object(a.jsx)(O.b,{path:"/mbr/empresa",component:_}),Object(a.jsx)(O.b,{path:"/mbr/maquinaria",component:te}),Object(a.jsx)(O.b,{path:"/mbr/seccion/:id",component:function(e){return Object(a.jsx)(ie,Object(u.a)({},e))}}),Object(a.jsx)(O.a,{to:"/mbr"})]}),Object(a.jsxs)(M.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:m,onHide:f,children:[Object(a.jsx)(M.a.Header,{children:Object(a.jsx)("h1",{children:"A\xf1adir Secci\xf3n a la web"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsx)(se,{handleClose:f})}),Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:f,children:"cerrar"})})]})]})]})})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{}),Object(a.jsxs)("main",{className:"container",children:[Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/",component:J}),Object(a.jsx)(O.b,{path:"/registro",component:Y}),Object(a.jsx)(O.a,{to:"/"})]}),Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Mec\xe1nica Bra\xf1osera S.L."})]})]})})})};b.b.add(m.a,p.d,p.b,p.c,p.a);var ue=function(){return JSON.parse(localStorage.getItem("mbr-user"))||{logged:!1}},de=function(){var e=Object(c.useRef)(!0),t=Object(c.useReducer)(j,{},ue),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){return function(){e.current=!1}}),[]),Object(c.useEffect)((function(){e.current&&localStorage.setItem("mbr-user",JSON.stringify(r))}),[r]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(l.Provider,{value:{user:r,dispatch:i},children:Object(a.jsx)(le,{})})})};s.a.render(Object(a.jsx)(de,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.2a0bc1e2.chunk.js.map